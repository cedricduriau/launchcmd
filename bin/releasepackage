#!/usr/bin/env python

# stdlib modules
import argparse

# tool modules
from launchcmd import packageutils


def _build_parser():
    """Builds the command line interface.

    :rtype: argparse.ArgumentParser
    """
    parser = argparse.ArgumentParser(prog="releasepackage")

    # required arguments
    req_args = parser.add_argument_group("required arguments:")

    helper = "root directory of the repository to release"
    req_args.add_argument("-r", "--repository", required=True, help=helper)

    helper = "version of the release"
    req_args.add_argument("-v", "--version", required=True, help=helper)

    helper = "comment of the release"
    req_args.add_argument("-c", "--comment", required=True, help=helper)

    return parser


if __name__ == "__main__":
    parser = _build_parser()
    namespace = parser.parse_args()

    repo_dir = namespace.repository
    version = namespace.version
    comment = namespace.comment

    packageutils.release_package(repo_dir, version, comment)
