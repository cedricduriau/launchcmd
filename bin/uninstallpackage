#!/usr/bin/env python

# stdlib modules
import argparse

# tool modules
from launchcmd import packageutils
from launchcmd import pathutils


def _build_parser():
    """Builds the command line interface.

    :rtype: argparse.ArgumentParser
    """
    description = "Uninstalls a package release from a level."
    parser = argparse.ArgumentParser(prog="uninstallpackage", description=description)

    # required arguments
    req_args = parser.add_argument_group("required arguments:")

    helper = "relative or absolute location of level to uninstall from"
    req_args.add_argument("-l", "--location", required=True, help=helper)

    helper = "name of the released package to uninstall"
    req_args.add_argument("-p", "--package", required=True, help=helper)

    helper = "version of the released package to uninstall"
    req_args.add_argument("-v", "--version", required=True, help=helper)

    return parser


if __name__ == "__main__":
    parser = _build_parser()
    namespace = parser.parse_args()

    location = namespace.location
    package = namespace.package
    version = namespace.version

    level_dir = pathutils.get_level_directory(location)
    packageutils.uninstall_package(level_dir, package, version)
